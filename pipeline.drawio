<mxfile host="app.diagrams.net" modified="2026-02-09T00:00:00.000Z" agent="Codex" version="20.8.10" type="device">
  <diagram id="pipeline" name="Page-1">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2400" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Containers -->
        <mxCell id="2" value="전처리" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;strokeColor=#666666;fillColor=none;align=left;verticalAlign=top;spacingLeft=8;spacingTop=6;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="140" y="30" width="2100" height="220" as="geometry"/>
        </mxCell>
        <mxCell id="3" value="맥락 인식 기반 위협 탐지" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;strokeColor=#666666;fillColor=none;align=left;verticalAlign=top;spacingLeft=8;spacingTop=6;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="140" y="300" width="2100" height="300" as="geometry"/>
        </mxCell>
        <mxCell id="4" value="근거/응답 생성" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;strokeColor=#666666;fillColor=none;align=left;verticalAlign=top;spacingLeft=8;spacingTop=6;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="140" y="630" width="2100" height="200" as="geometry"/>
        </mxCell>
        <mxCell id="5" value="저장/리포트" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;strokeColor=#666666;fillColor=none;align=left;verticalAlign=top;spacingLeft=8;spacingTop=6;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="140" y="870" width="2100" height="200" as="geometry"/>
        </mxCell>

        <!-- Nodes -->
        <mxCell id="10" value="Analyze 요청" style="shape=terminator;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="20" y="90" width="120" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="11" value="요청 검증(AnalyzeRequest)" style="shape=rect;whiteSpace=wrap;html=1;rounded=0;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="2">
          <mxGeometry x="20" y="80" width="170" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="12" value="URL 메시지?" style="shape=rhombus;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="2">
          <mxGeometry x="220" y="70" width="120" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="13" value="URL 검증/다운로드/타입 확인" style="shape=rect;whiteSpace=wrap;html=1;rounded=0;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="2">
          <mxGeometry x="380" y="80" width="190" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="14" value="OCR 수행(OpenAI)" style="shape=rect;whiteSpace=wrap;html=1;rounded=0;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="2">
          <mxGeometry x="600" y="80" width="140" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="15" value="OCR 성공?" style="shape=rhombus;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="2">
          <mxGeometry x="780" y="70" width="120" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="16" value="TEXT로 치환" style="shape=rect;whiteSpace=wrap;html=1;rounded=0;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="2">
          <mxGeometry x="930" y="40" width="130" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="17" value="원본 URL 유지" style="shape=rect;whiteSpace=wrap;html=1;rounded=0;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="2">
          <mxGeometry x="930" y="120" width="130" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="18" value="메시지 텍스트 추출 및 OTHER 발화 분리" style="shape=rect;whiteSpace=wrap;html=1;rounded=0;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="2">
          <mxGeometry x="1090" y="80" width="220" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="19" value="대화 유형 입력값 사용(type)" style="shape=rect;whiteSpace=wrap;html=1;rounded=0;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="3">
          <mxGeometry x="20" y="110" width="200" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="20" value="허용 신호 범위 결정" style="shape=rect;whiteSpace=wrap;html=1;rounded=0;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="3">
          <mxGeometry x="250" y="110" width="180" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="21" value="규칙 기반 위험 신호 추출" style="shape=rect;whiteSpace=wrap;html=1;rounded=0;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="3">
          <mxGeometry x="460" y="110" width="200" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="22" value="매칭 구절 추출" style="shape=rect;whiteSpace=wrap;html=1;rounded=0;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="3">
          <mxGeometry x="520" y="190" width="140" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="23" value="쿼리 확장 키워드" style="shape=rect;whiteSpace=wrap;html=1;rounded=0;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="3">
          <mxGeometry x="700" y="110" width="160" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="24" value="위험 단계 결정" style="shape=rhombus;whiteSpace=wrap;html=1;fillColor=#EDE7F6;strokeColor=#6A1B9A;" vertex="1" parent="3">
          <mxGeometry x="890" y="100" width="120" height="70" as="geometry"/>
        </mxCell>
        <mxCell id="25" value="정상(normal)" style="shape=rect;whiteSpace=wrap;html=1;rounded=0;fillColor=#E8F5E9;strokeColor=#2E7D32;" vertex="1" parent="3">
          <mxGeometry x="1040" y="60" width="140" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="26" value="의심(suspicious)" style="shape=rect;whiteSpace=wrap;html=1;rounded=0;fillColor=#FFF3E0;strokeColor=#EF6C00;" vertex="1" parent="3">
          <mxGeometry x="1040" y="130" width="140" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="27" value="위험(critical)" style="shape=rect;whiteSpace=wrap;html=1;rounded=0;fillColor=#FFEBEE;strokeColor=#C62828;" vertex="1" parent="3">
          <mxGeometry x="1040" y="200" width="140" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="28" value="RAG 검색(JSONL 코퍼스, 하이브리드/TF‑IDF 폴백)" style="shape=rect;whiteSpace=wrap;html=1;rounded=0;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="3">
          <mxGeometry x="1210" y="110" width="260" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="29" value="근거 문장(최대 3개)" style="shape=document;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="3">
          <mxGeometry x="1490" y="110" width="160" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="30" value="대화 발췌 생성(최대 20줄)" style="shape=rect;whiteSpace=wrap;html=1;rounded=0;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="3">
          <mxGeometry x="700" y="190" width="180" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="32" value="플랫폼 가이던스" style="shape=datastore;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1565C0;" vertex="1" parent="4">
          <mxGeometry x="1040" y="30" width="150" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="31" value="안전 행동 생성(LLM+JSON Schema/Fallback)" style="shape=rect;whiteSpace=wrap;html=1;rounded=0;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="4">
          <mxGeometry x="1250" y="70" width="220" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="33" value="응답 반환" style="shape=terminator;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#666666;" vertex="1" parent="4">
          <mxGeometry x="1490" y="70" width="120" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="34" value="분석 결과 저장(DB)" style="shape=datastore;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="5">
          <mxGeometry x="1250" y="50" width="180" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="35" value="개인별 리포트 생성(/report)" style="shape=document;whiteSpace=wrap;html=1;fillColor=#FFFFFF;strokeColor=#666666;" vertex="1" parent="5">
          <mxGeometry x="1500" y="50" width="200" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="36" value="Report 요청" style="shape=terminator;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="20" y="915" width="120" height="50" as="geometry"/>
        </mxCell>

        <!-- Edges -->
        <mxCell id="100" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="10" target="11">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="101" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="11" target="12">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="102" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="12" target="13">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="103" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="12" target="18">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="104" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="13" target="14">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="105" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="14" target="15">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="106" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="15" target="16">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="107" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="15" target="17">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="108" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="16" target="18">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="109" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="17" target="18">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="110" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="18" target="19">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="111" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="19" target="20">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="112" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="20" target="21">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="113" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="21" target="22">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="114" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="21" target="23">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="115" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="21" target="24">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="116" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="22" target="30">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="117" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="23" target="28">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="118" value="정상" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="24" target="25">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="119" value="의심" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="24" target="26">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="120" value="위험" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="24" target="27">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="121" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="25" target="28">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="122" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="26" target="28">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="123" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="27" target="28">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="124" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="28" target="29">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="125" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="29" target="31">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="126" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="30" target="31">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="127" value="참고" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="32" target="31">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="128" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="31" target="33">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="129" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="31" target="34">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="130" value="조회" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="34" target="35">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="131" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=classic;" edge="1" parent="1" source="36" target="35">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
